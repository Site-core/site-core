<?phpclass template {	private $files = array();    private $vars = array();    VAR $template;	VAR $homepage;		function __construct() {		$this->homepage = 'home';		$this->set_content();	}		function set_tpl($tpl_name){		$this->template = $this->get_file($tpl_name);	}	function set_vars($key,$var,$pages=''){	do {		if ($pages) {			$page = isset($_GET['page']) ? $_GET['page'] : $this->homepage;			if(!in_array($page, explode(",", $pages))){				if(!array_key_exists($key, $this->vars))					$this->vars[$key] = '';				break;			}		}		$this->vars[$key] = $var;	} while (0);			}	function get_file($file_name,$parse=false) {		$fh = @fopen($file_name, "r") or die("Couldn't open the file!");		$file_contents = fread($fh, filesize($file_name));		fclose($fh);		if($parse)			$file_contents = $this->parse_file($file_contents);		return $file_contents;	}// Обработчик страниц	function set_content () {		if (isset($_GET['page'])) {			$content = PGS_DIR.'/'.$_GET['page'].'.html';//			$hello = PGS_DIR.'hello/'.$_GET['page'].'.hello.html';		if (!file_exists($content)){				header('HTTP/1.0 404 Not Found');				$content = '404.html';			}		if (!file_exists($hello))			$hello = false;		} else {//			$this->register_file('slider', 'parts/slider.html');//			$slider = $this->get_file('slider');//			$hello = PGS_DIR.'hello/home.hello.html';			$content = PGS_DIR.'/'.$this->homepage.'.html';;		}		// if($hello){			// $this->register_file('hello', $hello);			// $hello = $this->get_file('hello');		// }		$content = $this->get_file($content);		$content = $this->parse_file($content);		$this->set_vars('CONTENT', $content);	}	function parse_file ($file){		foreach($this->vars as $find => $replace){			$file = str_replace("{".$find."}", $replace, $file);		}		return $file;	}	function tpl_parse(){		$this->template = $this->parse_file($this->template);	}}?>